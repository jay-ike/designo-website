class Stepper extends HTMLElement{#t;#e;constructor(){super()}static define(t="step-by-step"){let e;void 0!==window.customElements?(e=window.customElements.get(t),void 0!==e?console.warn("a custom element with the name "+t+" already exists"):window.customElements.define(t,Stepper)):console.warn("custom elements are not supported in this browser")}static get observedAttributes(){return["style"]}connectedCallback(){let t,e;this.isConnected&&(t=Number.parseInt(this.getAttribute("initial-index"),10),Number.isFinite(t)||(t=0),e=this.getAttribute("out-indicator")??"step-out",this.#e=e,this.#n(t),Array.from(this.children).forEach((function(n,i){n.style.setProperty("--i",i),n.classList.remove(e),i!==t&&n.classList.add(e)})))}attributeChangedCallback(t,e,n){const i="--current: "+this.#t+";";n&&null===n.match(i)&&"style"===t&&this.style.setProperty("--current",this.#t)}#n(t){this.#t=t,this.style.setProperty("--current",t)}#i(t){var e,n,i;e=t(n=this.#t),null!==this.children.item(e)&&(i=new CustomEvent("indexupdated",{detail:{current:e,previous:n}}),this.children.item(n).classList.add(this.#e),this.children.item(e).classList.remove(this.#e),this.#n(e),this.dispatchEvent(i))}currentStep(){return this.#t}nextStep(){this.#i((t=>t+1))}previousStep(){this.#i((t=>t-1))}gotoStep(t){Number.isFinite(t)&&this.#i((()=>t))}}const component=Object.create(null);function setInitialButtons(){component.form.elements.next_step.removeAttribute("hidden"),component.form.elements.submit.setAttribute("hidden",""),component.form.elements.prev_step.setAttribute("hidden","")}function initialize(){setInitialButtons(),Stepper.define()}component.stepper=document.querySelector("step-by-step"),component.form=document.forms[0],component.error_list=component.form.querySelector("#error-list"),component.stepper.addEventListener("indexupdated",(function(t){const{current:e}=t.detail;1===e&&(component.form.elements.prev_step.removeAttribute("hidden"),component.form.elements.submit.removeAttribute("hidden"),component.form.elements.next_step.setAttribute("hidden","")),0===e&&setInitialButtons()})),component.form.addEventListener("input",(function(t){const{target:e}=t,{error_list:n}=component;e.hasAttribute("aria-invalid")&&(e.removeAttribute("aria-invalid"),e.setCustomValidity(""),e.nextElementSibling.setAttribute("hidden",""),n.innerHTML="",n.parentElement.setAttribute("hidden",""))})),component.form.addEventListener("click",(function(t){const{target:e}=t,{error_list:n,form:i,stepper:r}=component;let s;if(window.HTMLButtonElement.prototype.isPrototypeOf(e))if(t.preventDefault(),"prev_step"!==e.name){if(s=i.querySelectorAll("fieldset")[r.currentStep()].elements,s=Array.from(s).map((function(t){const e=t.value.length>0&&t.validity.valid;let n,i=t.nextElementSibling?.textContent;return t.hasAttribute("aria-required")&&!e?(n=document.createElement("li"),n.innerHTML="<a href='#"+t.id+"'>"+i+"</a>",[t,n]):null})),s.some((t=>null!==t)))return n.innerHTML="",s.forEach((function(t){null!==t&&(t[0].nextElementSibling.removeAttribute("hidden"),t[0].setAttribute("aria-invalid","true"),t[0].setCustomValidity("invalid value"),t[0].nextElementSibling.removeAttribute("hidden"),n.appendChild(t[1]),n.parentElement.removeAttribute("hidden"))})),void n.parentElement.focus();"next_step"===e.name&&component.stepper.nextStep(),"submit"===e.name&&i.requestSubmit()}else component.stepper.previousStep()})),initialize();